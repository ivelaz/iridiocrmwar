<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8"/>
<link rel='shortcut icon' type='image/x-icon' href="#" th:href="@{/imgs/favicon.ico}" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/slate/bootstrap.min.css" />
<link rel="stylesheet" href="#" th:href="@{/css/sidebar.css}" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<title>Ver llamadas</title>
</head>
<body>

	<div id="wrapper">

		<!-- Sidebar -->
		<div id="sidebar-wrapper">
			<ul class="sidebar-nav">
				<li class="sidebar-brand"><a href="#" th:href="@{/}">
						<h3>
							<b><i><span class="text-info">IRIDIO crm</span></i></b>
						</h3>
				</a></li>
				<li><a href="#" th:href="@{/clientes/crearcliente}">Crear cliente</a></li>
				<li><a href="#" th:href="@{/clientes/verclientes}">Ver clientes</a></li>
				<li><a href="#" th:href="@{/buscar/buscarform}">Registrar LLamada</a></li>
				<li><a href="#" th:href="@{/llamadas/listarllamadas}">Ver LLamadas</a></li>
			</ul>
		</div>
		<!-- /#sidebar-wrapper -->



		<!-- Page Content -->
		<div id="page-content-wrapper">
			<div class="container-fluid">
				<div class="row">
					<div class="col-lg-12">
						<a href="#menu-toggle" class="btn btn-default" id="menu-toggle">
							<img src="#" th:src="@{/imgs/menu.png}" />
						</a>
						<!-- ****************************************************************************** -->
						<div style="text-align:center; margin:auto; max-width: 400px;">
							<div th:if="${resul == 2}">
								<div class="alert alert-dismissible alert-info">
									<strong>LLamada añadida a la base de datos
										correctamente.</strong>
								</div>
							</div>
							<div th:if="${result == 1}">
								<div class="alert alert-dismissible alert-danger">
									<strong>Error! no se ha podido procesar la llamada en la
										base de datos.</strong>
								</div>
							</div>							
							<div th:if="${vacia == 1}">
								<div class="alert alert-dismissible alert-info">
									<strong>Aún no hay llamadas registradas para este cliente.</strong>
								</div>
							</div>

						</div>

						<h3 style="color:white;">Ver llamadas</h3>		
						<div th:if="${cliente != null}">
							<h2 th:text="${cliente}"></h2>
						</div>				
						<div class="well">
							<table class="table table-striped table-hover ">
								<thead>
									<tr class="text-info">
										<th>ID LLamada</th>
										<th>Cliente</th>
										<th>Fecha</th>
										<th>Tipo LLamada</th>
										<th>Ver/Borrar</th>										
									</tr>
								</thead>
								<tbody>
									<tr th:each="llamada : ${lista}">
										<td th:text="${llamada.id}"></td>
										<td th:text="${llamada.cliente.nombre}"></td>
										<td th:text="${llamada.fecha}"></td>
										<td th:text="${llamada.tipo}"></td>
										<td>
											<a href="#" th:href="@{/llamadas/verllamada?id=__${llamada.id}__}">												
												<button type="button" class="btn btn-primary"><span class="glyphicon glyphicon-eye-open" aria-hidden="true"></span></button>
											</a>	
											<a href="#" th:href="@{/llamadas/borrarllamada?id=__${llamada.id}__}" onclick="return confirm('Seguro que deseas eliminarlo? esta acción no se puede deshacer.');">
												<button type="button" class="btn btn-danger"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></button>
											</a>
										</td>
									</tr>

								</tbody>
							</table>
						</div>




						<!-- ****************************************************************************** -->
					</div>
				</div>
			</div>
		</div>
		<!-- /#page-content-wrapper -->

	</div>
	<!-- /#wrapper -->
	<!-- Menu Toggle Script -->
	<script>
    $("#menu-toggle").click(function(e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
    });
    </script>

</body>
</html>